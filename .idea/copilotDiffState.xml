<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/README.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/README.md" />
              <option name="updatedContent" value="Conversion CSV -&gt; XML&#10;&#10;Ce dépôt contient un petit script Python pour convertir le fichier CSV `PADCHEST_chest_x_ray_images_labels_160K_01.02.19.csv` en un fichier XML avec la structure demandée (ImageID en attribut et balises dans l'ordre exact demandé).&#10;&#10;Comment l'utiliser (Windows, cmd.exe):&#10;&#10;1. Ouvrez une fenêtre cmd dans le dossier du projet (`C:\Users\MohammedE\Documents\nouvelle`).&#10;2. Exécutez (Python 3.6+ requis):&#10;&#10;    python scripts\csv_to_xml.py src\main\java\org\example\data\PADCHEST_chest_x_ray_images_labels_160K_01.02.19.csv src\main\java\org\example\data\PADCHEST_chest_x_ray_images_labels_160K_01.02.19.xml&#10;&#10;Le script lit le CSV en streaming, gère correctement les guillemets et écrit `images` / `image` avec `ImageID` comme attribut. Il ignore les champs vides pour ne pas créer d'éléments vides.&#10;&#10;Remarque: le projet Java contient déjà une classe `conversion_xml` qui fait une conversion similaire; si vous souhaitez l'utiliser, installez Maven et exécutez `mvn package` puis la classe Java (mais sur cette machine `mvn` n'est apparemment pas disponible). Le script Python est autonome et devrait fonctionner sans installer Maven.&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/scripts/csv_to_xml.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/scripts/csv_to_xml.py" />
              <option name="updatedContent" value="&quot;&quot;&quot;&#10;Script de conversion CSV -&gt; XML pour reproduire le format attendu (ImageID en attribut, éléments dans l'ordre demandé,&#10;nom exact des balises comme dans `PADCHEST_chest_x_ray_images_labels_160K_01.02.19.xml`).&#10;Usage (Windows cmd.exe):&#10;    python scripts\csv_to_xml.py &quot;path\to\PADCHEST_chest_x_ray_images_labels_160K_01.02.19.csv&quot; &quot;path\to\output.xml&quot;&#10;&#10;Le script lit en streaming (pour gros fichiers), gère les guillemets correctement (module csv),&#10;ignore les champs vides (ne les écrit pas), et conserve l'ordre des colonnes demandé.&#10;&quot;&quot;&quot;&#10;from __future__ import annotations&#10;import csv&#10;import sys&#10;import os&#10;import xml.sax.saxutils as sax&#10;from typing import List, Dict&#10;&#10;# Colonnes attendues (clés normalisées en minuscules) et noms de sortie exacts&#10;DESIRED_COLUMNS: List[tuple] = [&#10;    (&quot;imageid&quot;, &quot;ImageID&quot;),&#10;    (&quot;imagedir&quot;, &quot;ImageDir&quot;),&#10;    (&quot;studyid&quot;, &quot;StudyID&quot;),&#10;    (&quot;patientid&quot;, &quot;PatientID&quot;),&#10;    (&quot;patientbirth&quot;, &quot;PatientBirth&quot;),&#10;    (&quot;projection&quot;, &quot;Projection&quot;),&#10;    (&quot;pediatric&quot;, &quot;Pediatric&quot;),&#10;    (&quot;methodprojection&quot;, &quot;MethodProjection&quot;),&#10;    (&quot;reportid&quot;, &quot;ReportID&quot;),&#10;    (&quot;report&quot;, &quot;Report&quot;),&#10;    (&quot;methodlabel&quot;, &quot;MethodLabel&quot;),&#10;    (&quot;labels&quot;, &quot;Labels&quot;),&#10;    (&quot;localizations&quot;, &quot;Localizations&quot;),&#10;    (&quot;labelslocalizationsbysentence&quot;, &quot;LabelsLocalizationsBySentence&quot;),&#10;    # accepter la faute commune 'labeicuis' et normal 'labelcuis'&#10;    (&quot;labelcuis&quot;, &quot;LabeICUIS&quot;),&#10;    (&quot;labeicuis&quot;, &quot;LabeICUIS&quot;),&#10;    (&quot;localizationscuis&quot;, &quot;LocalizationsCUIS&quot;),&#10;]&#10;&#10;EXPECTED_HEADERS = {k for k, _ in DESIRED_COLUMNS}&#10;&#10;&#10;def normalize(h: str) -&gt; str:&#10;    if h is None:&#10;        return &quot;&quot;&#10;    return h.strip().lower()&#10;&#10;&#10;def build_header_index(headers: List[str]) -&gt; Dict[str, int]:&#10;    idx: Dict[str, int] = {}&#10;    for i, h in enumerate(headers):&#10;        n = normalize(h)&#10;        if n and n not in idx:&#10;            idx[n] = i&#10;    # tolérance: si header contient &quot;labeicuis&quot; correspond à labelcuis&#10;    if &quot;labeicuis&quot; in idx and &quot;labelcuis&quot; not in idx:&#10;        idx[&quot;labelcuis&quot;] = idx[&quot;labeicuis&quot;]&#10;    return idx&#10;&#10;&#10;def escape_text(s: str) -&gt; str:&#10;    # utiliser saxutils pour échapper convenablement le contenu des éléments&#10;    return sax.escape(s) if s is not None else &quot;&quot;&#10;&#10;&#10;def escape_attr(s: str) -&gt; str:&#10;    # pour attributs, échapper aussi les apostrophes si nécessaire (sax.escape ne le fait pas)&#10;    if s is None:&#10;        return &quot;&quot;&#10;    escaped = sax.escape(s)&#10;    return escaped.replace(&quot;'&quot;, &quot;&amp;apos;&quot;)&#10;&#10;&#10;def convert(csv_path: str, xml_path: str) -&gt; int:&#10;    # Vérifications basiques&#10;    if not os.path.exists(csv_path):&#10;        print(f&quot;Fichier introuvable: {csv_path}&quot;)&#10;        return 2&#10;&#10;    # Ouvrir en lecture en UTF-8 en mode texte&#10;    with open(csv_path, newline='', encoding='utf-8') as csvfile:&#10;        # détecteur dialecte basique&#10;        reader = csv.reader(csvfile)&#10;        try:&#10;            headers = next(reader)&#10;        except StopIteration:&#10;            print(&quot;CSV vide&quot;)&#10;            return 3&#10;&#10;        header_index = build_header_index(headers)&#10;&#10;        # Vérifier la présence des colonnes minimales (imageid recommandé)&#10;        missing = [h for h in EXPECTED_HEADERS if h not in header_index]&#10;        # tolérance pour labelcuis/labeicuis&#10;        if &quot;labelcuis&quot; in missing and &quot;labeicuis&quot; in header_index:&#10;            missing.remove(&quot;labelcuis&quot;)&#10;        if missing:&#10;            print(&quot;Colonnes manquantes (liste attendue partielle):&quot;, missing)&#10;            print(&quot;En-têtes trouvés:&quot;, headers)&#10;            # continuer malgré tout si l'utilisateur veut, mais on signale&#10;&#10;        # écrire en streaming le fichier XML&#10;        count = 0&#10;        with open(xml_path, 'w', encoding='utf-8', newline='') as xf:&#10;            xf.write('&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n')&#10;            xf.write('&lt;images&gt;\n')&#10;&#10;            for row in reader:&#10;                # éviter lignes vides&#10;                if not any(cell.strip() for cell in row):&#10;                    continue&#10;                # s'assurer que row a la même taille que headers&#10;                if len(row) &lt; len(headers):&#10;                    row = row + [&quot;&quot;] * (len(headers) - len(row))&#10;&#10;                imageid = &quot;&quot;&#10;                if 'imageid' in header_index:&#10;                    imageid = row[header_index['imageid']]&#10;                imageid = '' if imageid is None else imageid&#10;&#10;                xf.write(f'  &lt;image ImageID=&quot;{escape_attr(imageid)}&quot;&gt;\n')&#10;&#10;                # écrire les colonnes demandées dans l'ordre&#10;                for norm, outname in DESIRED_COLUMNS:&#10;                    if norm == 'imageid':&#10;                        continue&#10;                    idx = header_index.get(norm)&#10;                    if idx is None:&#10;                        continue&#10;                    val = row[idx]&#10;                    if val is None:&#10;                        continue&#10;                    val = val.strip()&#10;                    if val == &quot;&quot;:&#10;                        continue&#10;                    # écrire l'élément&#10;                    xf.write(f'    &lt;{outname}&gt;' + escape_text(val) + f'&lt;/{outname}&gt;\n')&#10;&#10;                xf.write('  &lt;/image&gt;\n')&#10;                count += 1&#10;                if (count % 1000) == 0:&#10;                    xf.flush()&#10;&#10;            xf.write('&lt;/images&gt;\n')&#10;&#10;    print(f&quot;Conversion terminée: {count} enregistrements écrits dans {xml_path}&quot;)&#10;    return 0&#10;&#10;&#10;if __name__ == '__main__':&#10;    if len(sys.argv) &lt; 2:&#10;        print(&quot;Usage: python scripts\\csv_to_xml.py input.csv [output.xml]&quot;)&#10;        sys.exit(1)&#10;    csv_path = sys.argv[1]&#10;    xml_path = sys.argv[2] if len(sys.argv) &gt; 2 else os.path.splitext(csv_path)[0] + '.xml'&#10;    rc = convert(csv_path, xml_path)&#10;    sys.exit(rc)&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/org/example/xslt/pro.xsl">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/org/example/xslt/pro.xsl" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;&#10;    &lt;xsl:output method=&quot;html&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot;/&gt;&#10;&#10;    &lt;xsl:template match=&quot;/&quot;&gt;&#10;        &lt;html&gt;&#10;            &lt;head&gt;&#10;                &lt;meta charset=&quot;UTF-8&quot;/&gt;&#10;                &lt;title&gt;PadChest - Version Pro&lt;/title&gt;&#10;                &lt;style&gt;&#10;                    body { font-family: Arial, sans-serif; padding: 20px; margin: 0; }&#10;                    table { width: 100%; border-collapse: collapse; margin: 20px 0; }&#10;                    th { background-color: #4CAF50; color: white; padding: 12px; text-align: left; }&#10;                    td { border: 1px solid #ddd; padding: 10px; }&#10;                    tr:nth-child(even) { background-color: #f2f2f2; }&#10;                    tr:hover { background-color: #ddd; }&#10;&#10;                    /* IMPORTANT : cacher les lignes par défaut&#10;                    (elles seront affichées par JS pour la page courante) */&#10;                    .table-row { display: none; }&#10;&#10;                    .pagination { margin: 20px 0; text-align: center; }&#10;                    .pagination button {&#10;                    margin: 0 5px; padding: 10px 20px; cursor: pointer;&#10;                    background-color: #4CAF50; color: white; border: none; border-radius: 5px; font-size: 14px;&#10;                    }&#10;                    .pagination button:hover:not(:disabled) { background-color: #45a049; }&#10;                    .pagination button:disabled { cursor: not-allowed; opacity: 0.5; background-color: #ccc; }&#10;                    .pagination-info { margin: 15px 0; font-weight: bold; font-size: 16px; }&#10;                    h1, h2 { color: #333; }&#10;                &lt;/style&gt;&#10;            &lt;/head&gt;&#10;            &lt;body&gt;&#10;                &lt;h1&gt;PadChest - Base de Données d'Images Radiographiques&lt;/h1&gt;&#10;                &lt;p&gt;Version Pro - Affichage en tableau HTML&lt;/p&gt;&#10;&#10;                &lt;h2&gt;Statistiques&lt;/h2&gt;&#10;                &lt;p&gt;Nombre total d'images dans la base : &lt;strong&gt;&lt;xsl:value-of select=&quot;count(//image)&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;&#10;&#10;                &lt;div class=&quot;pagination-info&quot; id=&quot;paginationInfo&quot;&gt;&lt;/div&gt;&#10;&#10;                &lt;div class=&quot;pagination&quot;&gt;&#10;                    &lt;button onclick=&quot;firstPage()&quot; id=&quot;firstBtn&quot;&gt;⏮️ Première&lt;/button&gt;&#10;                    &lt;button onclick=&quot;previousPage()&quot; id=&quot;prevBtn&quot;&gt;◀️ Précédent&lt;/button&gt;&#10;                    &lt;span id=&quot;pageInfo&quot; style=&quot;margin: 0 15px; font-weight: bold;&quot;&gt;&lt;/span&gt;&#10;                    &lt;button onclick=&quot;nextPage()&quot; id=&quot;nextBtn&quot;&gt;Suivant ▶️&lt;/button&gt;&#10;                    &lt;button onclick=&quot;lastPage()&quot; id=&quot;lastBtn&quot;&gt;Dernière ⏭️&lt;/button&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;hr/&gt;&#10;&#10;                &lt;h2&gt;Tableau des Images&lt;/h2&gt;&#10;&#10;                &lt;table&gt;&#10;                    &lt;thead&gt;&#10;                        &lt;tr&gt;&#10;                            &lt;th&gt;N°&lt;/th&gt;&#10;                            &lt;th&gt;ID Image&lt;/th&gt;&#10;                            &lt;th&gt;Répertoire&lt;/th&gt;&#10;                            &lt;th&gt;ID Étude&lt;/th&gt;&#10;                            &lt;th&gt;ID Patient&lt;/th&gt;&#10;                            &lt;th&gt;Naissance&lt;/th&gt;&#10;                            &lt;th&gt;Pédiatrique&lt;/th&gt;&#10;                            &lt;th&gt;Projection&lt;/th&gt;&#10;                            &lt;th&gt;Méth. Proj.&lt;/th&gt;&#10;                            &lt;th&gt;Méth. Label&lt;/th&gt;&#10;                            &lt;th&gt;Labels&lt;/th&gt;&#10;                            &lt;th&gt;Localisations&lt;/th&gt;&#10;                            &lt;th&gt;Rapport&lt;/th&gt;&#10;                            &lt;th&gt;ID Rapport&lt;/th&gt;&#10;                        &lt;/tr&gt;&#10;                    &lt;/thead&gt;&#10;                    &lt;tbody id=&quot;tableBody&quot;&gt;&#10;                        &lt;xsl:for-each select=&quot;//image&quot;&gt;&#10;                            &lt;tr class=&quot;table-row&quot; data-index=&quot;{position()}&quot;&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;position()&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;ImageID&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;ImageDir&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;StudyID&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;PatientID&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&#10;                                    &lt;xsl:choose&gt;&#10;                                        &lt;xsl:when test=&quot;contains(PatientBirth, '.0')&quot;&gt;&#10;                                            &lt;xsl:value-of select=&quot;substring-before(PatientBirth, '.0')&quot;/&gt;&#10;                                        &lt;/xsl:when&gt;&#10;                                        &lt;xsl:otherwise&gt;&#10;                                            &lt;xsl:value-of select=&quot;PatientBirth&quot;/&gt;&#10;                                        &lt;/xsl:otherwise&gt;&#10;                                    &lt;/xsl:choose&gt;&#10;                                &lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;Projection&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;MethodProjection&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;MethodLabel&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&#10;                                    &lt;xsl:choose&gt;&#10;                                        &lt;xsl:when test=&quot;Labels/Label&quot;&gt;&#10;                                            &lt;xsl:for-each select=&quot;Labels/Label&quot;&gt;&#10;                                                &lt;xsl:value-of select=&quot;.&quot;/&gt;&#10;                                                &lt;xsl:if test=&quot;position() != last()&quot;&gt; | &lt;/xsl:if&gt;&#10;                                            &lt;/xsl:for-each&gt;&#10;                                        &lt;/xsl:when&gt;&#10;                                        &lt;xsl:otherwise&gt;-&lt;/xsl:otherwise&gt;&#10;                                    &lt;/xsl:choose&gt;&#10;                                &lt;/td&gt;&#10;                                &lt;td&gt;&#10;                                    &lt;xsl:choose&gt;&#10;                                        &lt;xsl:when test=&quot;Localizations/Localization&quot;&gt;&#10;                                            &lt;xsl:for-each select=&quot;Localizations/Localization&quot;&gt;&#10;                                                &lt;xsl:value-of select=&quot;.&quot;/&gt;&#10;                                                &lt;xsl:if test=&quot;position() != last()&quot;&gt; | &lt;/xsl:if&gt;&#10;                                            &lt;/xsl:for-each&gt;&#10;                                        &lt;/xsl:when&gt;&#10;                                        &lt;xsl:otherwise&gt;-&lt;/xsl:otherwise&gt;&#10;                                    &lt;/xsl:choose&gt;&#10;                                &lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;Report&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;ReportID&quot;/&gt;&lt;/td&gt;&#10;                            &lt;/tr&gt;&#10;                        &lt;/xsl:for-each&gt;&#10;                    &lt;/tbody&gt;&#10;                &lt;/table&gt;&#10;&#10;                &lt;div class=&quot;pagination&quot;&gt;&#10;                    &lt;button onclick=&quot;firstPage()&quot;&gt;⏮️ Première&lt;/button&gt;&#10;                    &lt;button onclick=&quot;previousPage()&quot;&gt;◀️ Précédent&lt;/button&gt;&#10;                    &lt;span id=&quot;pageInfo2&quot; style=&quot;margin: 0 15px; font-weight: bold;&quot;&gt;&lt;/span&gt;&#10;                    &lt;button onclick=&quot;nextPage()&quot;&gt;Suivant ▶️&lt;/button&gt;&#10;                    &lt;button onclick=&quot;lastPage()&quot;&gt;Dernière ⏭️&lt;/button&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;footer&gt;&#10;                    &lt;p&gt;Fin du tableau - PadChest Version Pro&lt;/p&gt;&#10;                &lt;/footer&gt;&#10;&#10;                &lt;script&gt;&#10;                    const itemsPerPage = 10;&#10;                    let currentPage = 1;&#10;                    let totalItems = 0;&#10;                    let totalPages = 0;&#10;                    const rows = [];&#10;&#10;                    function init() {&#10;                    const allRows = document.querySelectorAll('.table-row');&#10;                    rows.length = 0;&#10;                    allRows.forEach(row =&gt; rows.push(row));&#10;                    totalItems = rows.length;&#10;                    totalPages = Math.max(1, Math.ceil(totalItems / itemsPerPage));&#10;                    showPage(1);&#10;                    }&#10;&#10;                    function showPage(page) {&#10;                    currentPage = page;&#10;&#10;                    rows.forEach((row, index) =&gt; {&#10;                    const rowPage = Math.ceil((index + 1) / itemsPerPage);&#10;                    row.style.display = (rowPage === currentPage) ? 'table-row' : 'none';&#10;                    });&#10;&#10;                    updatePaginationInfo();&#10;                    updateButtons();&#10;                    }&#10;&#10;                    function updatePaginationInfo() {&#10;                    const start = (currentPage - 1) * itemsPerPage + 1;&#10;                    const end = Math.min(currentPage * itemsPerPage, totalItems);&#10;                    const info = `Affichage des images ${start} à ${end} sur ${totalItems} (Page ${currentPage} sur ${totalPages})`;&#10;&#10;                    const p1 = document.getElementById('paginationInfo');&#10;                    const i1 = document.getElementById('pageInfo');&#10;                    const i2 = document.getElementById('pageInfo2');&#10;&#10;                    if (p1) p1.textContent = info;&#10;                    if (i1) i1.textContent = `Page ${currentPage} / ${totalPages}`;&#10;                    if (i2) i2.textContent = `Page ${currentPage} / ${totalPages}`;&#10;                    }&#10;&#10;                    function updateButtons() {&#10;                    const firstBtn = document.getElementById('firstBtn');&#10;                    const prevBtn = document.getElementById('prevBtn');&#10;                    const nextBtn = document.getElementById('nextBtn');&#10;                    const lastBtn = document.getElementById('lastBtn');&#10;&#10;                    if (firstBtn) firstBtn.disabled = currentPage === 1;&#10;                    if (prevBtn)  prevBtn.disabled  = currentPage === 1;&#10;                    if (nextBtn)  nextBtn.disabled  = currentPage === totalPages;&#10;                    if (lastBtn)  lastBtn.disabled  = currentPage === totalPages;&#10;                    }&#10;&#10;                    function firstPage()  { if (currentPage !== 1) { showPage(1); window.scrollTo(0, 0); } }&#10;                    function previousPage(){ if (currentPage &gt; 1)   { showPage(currentPage - 1); window.scrollTo(0, 0); } }&#10;                    function nextPage()    { if (currentPage &amp;lt; totalPages) { showPage(currentPage + 1); window.scrollTo(0, 0); } }&#10;                    function lastPage()    { if (currentPage !== totalPages) { showPage(totalPages); window.scrollTo(0, 0); } }&#10;&#10;                    // Lance init immédiatement si le DOM est déjà prêt, sinon écoute l'évènement&#10;                    if (document.readyState === 'loading') {&#10;                    document.addEventListener('DOMContentLoaded', init);&#10;                    } else {&#10;                    init();&#10;                    }&#10;                &lt;/script&gt;&#10;            &lt;/body&gt;&#10;        &lt;/html&gt;&#10;    &lt;/xsl:template&gt;&#10;&lt;/xsl:stylesheet&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;&#10;    &lt;xsl:output method=&quot;html&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot;/&gt;&#10;&#10;    &lt;xsl:template match=&quot;/&quot;&gt;&#10;        &lt;html&gt;&#10;            &lt;head&gt;&#10;                &lt;meta charset=&quot;UTF-8&quot;/&gt;&#10;                &lt;title&gt;PadChest - Version Pro&lt;/title&gt;&#10;                &lt;style&gt;&#10;                    body { font-family: Arial, sans-serif; padding: 20px; margin: 0; }&#10;                    table { width: 100%; border-collapse: collapse; margin: 20px 0; }&#10;                    th { background-color: #4CAF50; color: white; padding: 12px; text-align: left; }&#10;                    td { border: 1px solid #ddd; padding: 10px; }&#10;                    tr:nth-child(even) { background-color: #f2f2f2; }&#10;                    tr:hover { background-color: #ddd; }&#10;&#10;                    /* IMPORTANT : cacher les lignes par défaut&#10;                    (elles seront affichées par JS pour la page courante) */&#10;                    .table-row { display: none; }&#10;&#10;                    .pagination { margin: 20px 0; text-align: center; }&#10;                    .pagination button {&#10;                    margin: 0 5px; padding: 10px 20px; cursor: pointer;&#10;                    background-color: #4CAF50; color: white; border: none; border-radius: 5px; font-size: 14px;&#10;                    }&#10;                    .pagination button:hover:not(:disabled) { background-color: #45a049; }&#10;                    .pagination button:disabled { cursor: not-allowed; opacity: 0.5; background-color: #ccc; }&#10;                    .pagination-info { margin: 15px 0; font-weight: bold; font-size: 16px; }&#10;                    h1, h2 { color: #333; }&#10;                &lt;/style&gt;&#10;            &lt;/head&gt;&#10;            &lt;body&gt;&#10;                &lt;h1&gt;PadChest - Base de Données d'Images Radiographiques&lt;/h1&gt;&#10;                &lt;p&gt;Version Pro - Affichage en tableau HTML&lt;/p&gt;&#10;&#10;                &lt;h2&gt;Statistiques&lt;/h2&gt;&#10;                &lt;p&gt;Nombre total d'images dans la base : &lt;strong&gt;&lt;xsl:value-of select=&quot;count(//image)&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;&#10;&#10;                &lt;div class=&quot;pagination-info&quot; id=&quot;paginationInfo&quot;&gt;&lt;/div&gt;&#10;&#10;                &lt;div class=&quot;pagination&quot;&gt;&#10;                    &lt;button onclick=&quot;firstPage()&quot; id=&quot;firstBtn&quot;&gt;⏮️ Première&lt;/button&gt;&#10;                    &lt;button onclick=&quot;previousPage()&quot; id=&quot;prevBtn&quot;&gt;◀️ Précédent&lt;/button&gt;&#10;                    &lt;span id=&quot;pageInfo&quot; style=&quot;margin: 0 15px; font-weight: bold;&quot;&gt;&lt;/span&gt;&#10;                    &lt;button onclick=&quot;nextPage()&quot; id=&quot;nextBtn&quot;&gt;Suivant ▶️&lt;/button&gt;&#10;                    &lt;button onclick=&quot;lastPage()&quot; id=&quot;lastBtn&quot;&gt;Dernière ⏭️&lt;/button&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;hr/&gt;&#10;&#10;                &lt;h2&gt;Tableau des Images&lt;/h2&gt;&#10;&#10;                &lt;table&gt;&#10;                    &lt;thead&gt;&#10;                        &lt;tr&gt;&#10;                            &lt;th&gt;N°&lt;/th&gt;&#10;                            &lt;th&gt;ID Image&lt;/th&gt;&#10;                            &lt;th&gt;Répertoire&lt;/th&gt;&#10;                            &lt;th&gt;ID Étude&lt;/th&gt;&#10;                            &lt;th&gt;ID Patient&lt;/th&gt;&#10;                            &lt;th&gt;Naissance&lt;/th&gt;&#10;                            &lt;th&gt;Pédiatrique&lt;/th&gt;&#10;                            &lt;th&gt;Projection&lt;/th&gt;&#10;                            &lt;th&gt;Méth. Proj.&lt;/th&gt;&#10;                            &lt;th&gt;Méth. Label&lt;/th&gt;&#10;                            &lt;th&gt;Labels&lt;/th&gt;&#10;                            &lt;th&gt;Localisations&lt;/th&gt;&#10;                            &lt;th&gt;Rapport&lt;/th&gt;&#10;                            &lt;th&gt;ID Rapport&lt;/th&gt;&#10;                        &lt;/tr&gt;&#10;                    &lt;/thead&gt;&#10;                    &lt;tbody id=&quot;tableBody&quot;&gt;&#10;                        &lt;xsl:for-each select=&quot;//image&quot;&gt;&#10;                            &lt;tr class=&quot;table-row&quot; data-index=&quot;{position()}&quot;&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;position()&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;ImageID&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;ImageDir&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;StudyID&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;PatientID&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&#10;                                    &lt;xsl:choose&gt;&#10;                                        &lt;xsl:when test=&quot;contains(PatientBirth, '.0')&quot;&gt;&#10;                                            &lt;xsl:value-of select=&quot;substring-before(PatientBirth, '.0')&quot;/&gt;&#10;                                        &lt;/xsl:when&gt;&#10;                                        &lt;xsl:otherwise&gt;&#10;                                            &lt;xsl:value-of select=&quot;PatientBirth&quot;/&gt;&#10;                                        &lt;/xsl:otherwise&gt;&#10;                                    &lt;/xsl:choose&gt;&#10;                                &lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;Pediatric&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;Projection&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;MethodProjection&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;MethodLabel&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&#10;                                    &lt;xsl:choose&gt;&#10;                                        &lt;xsl:when test=&quot;Labels/Label&quot;&gt;&#10;                                            &lt;xsl:for-each select=&quot;Labels/Label&quot;&gt;&#10;                                                &lt;xsl:value-of select=&quot;.&quot;/&gt;&#10;                                                &lt;xsl:if test=&quot;position() != last()&quot;&gt; | &lt;/xsl:if&gt;&#10;                                            &lt;/xsl:for-each&gt;&#10;                                        &lt;/xsl:when&gt;&#10;                                        &lt;xsl:otherwise&gt;-&lt;/xsl:otherwise&gt;&#10;                                    &lt;/xsl:choose&gt;&#10;                                &lt;/td&gt;&#10;                                &lt;td&gt;&#10;                                    &lt;xsl:choose&gt;&#10;                                        &lt;xsl:when test=&quot;Localizations/Localization&quot;&gt;&#10;                                            &lt;xsl:for-each select=&quot;Localizations/Localization&quot;&gt;&#10;                                                &lt;xsl:value-of select=&quot;.&quot;/&gt;&#10;                                                &lt;xsl:if test=&quot;position() != last()&quot;&gt; | &lt;/xsl:if&gt;&#10;                                            &lt;/xsl:for-each&gt;&#10;                                        &lt;/xsl:when&gt;&#10;                                        &lt;xsl:otherwise&gt;-&lt;/xsl:otherwise&gt;&#10;                                    &lt;/xsl:choose&gt;&#10;                                &lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;Report&quot;/&gt;&lt;/td&gt;&#10;                                &lt;td&gt;&lt;xsl:value-of select=&quot;ReportID&quot;/&gt;&lt;/td&gt;&#10;                            &lt;/tr&gt;&#10;                        &lt;/xsl:for-each&gt;&#10;                    &lt;/tbody&gt;&#10;                &lt;/table&gt;&#10;&#10;                &lt;div class=&quot;pagination&quot;&gt;&#10;                    &lt;button onclick=&quot;firstPage()&quot;&gt;⏮️ Première&lt;/button&gt;&#10;                    &lt;button onclick=&quot;previousPage()&quot;&gt;◀️ Précédent&lt;/button&gt;&#10;                    &lt;span id=&quot;pageInfo2&quot; style=&quot;margin: 0 15px; font-weight: bold;&quot;&gt;&lt;/span&gt;&#10;                    &lt;button onclick=&quot;nextPage()&quot;&gt;Suivant ▶️&lt;/button&gt;&#10;                    &lt;button onclick=&quot;lastPage()&quot;&gt;Dernière ⏭️&lt;/button&gt;&#10;                &lt;/div&gt;&#10;&#10;                &lt;footer&gt;&#10;                    &lt;p&gt;Fin du tableau - PadChest Version Pro&lt;/p&gt;&#10;                &lt;/footer&gt;&#10;&#10;                &lt;script&gt;&#10;                    const itemsPerPage = 10;&#10;                    let currentPage = 1;&#10;                    let totalItems = 0;&#10;                    let totalPages = 0;&#10;                    const rows = [];&#10;&#10;                    function init() {&#10;                    const allRows = document.querySelectorAll('.table-row');&#10;                    rows.length = 0;&#10;                    allRows.forEach(row =&gt; rows.push(row));&#10;                    totalItems = rows.length;&#10;                    totalPages = Math.max(1, Math.ceil(totalItems / itemsPerPage));&#10;                    showPage(1);&#10;                    }&#10;&#10;                    function showPage(page) {&#10;                    currentPage = page;&#10;&#10;                    rows.forEach((row, index) =&gt; {&#10;                    const rowPage = Math.ceil((index + 1) / itemsPerPage);&#10;                    row.style.display = (rowPage === currentPage) ? 'table-row' : 'none';&#10;                    });&#10;&#10;                    updatePaginationInfo();&#10;                    updateButtons();&#10;                    }&#10;&#10;                    function updatePaginationInfo() {&#10;                    const start = (currentPage - 1) * itemsPerPage + 1;&#10;                    const end = Math.min(currentPage * itemsPerPage, totalItems);&#10;                    const info = `Affichage des images ${start} à ${end} sur ${totalItems} (Page ${currentPage} sur ${totalPages})`;&#10;&#10;                    const p1 = document.getElementById('paginationInfo');&#10;                    const i1 = document.getElementById('pageInfo');&#10;                    const i2 = document.getElementById('pageInfo2');&#10;&#10;                    if (p1) p1.textContent = info;&#10;                    if (i1) i1.textContent = `Page ${currentPage} / ${totalPages}`;&#10;                    if (i2) i2.textContent = `Page ${currentPage} / ${totalPages}`;&#10;                    }&#10;&#10;                    function updateButtons() {&#10;                    const firstBtn = document.getElementById('firstBtn');&#10;                    const prevBtn = document.getElementById('prevBtn');&#10;                    const nextBtn = document.getElementById('nextBtn');&#10;                    const lastBtn = document.getElementById('lastBtn');&#10;&#10;                    if (firstBtn) firstBtn.disabled = currentPage === 1;&#10;                    if (prevBtn)  prevBtn.disabled  = currentPage === 1;&#10;                    if (nextBtn)  nextBtn.disabled  = currentPage === totalPages;&#10;                    if (lastBtn)  lastBtn.disabled  = currentPage === totalPages;&#10;                    }&#10;&#10;                    function firstPage()  { if (currentPage !== 1) { showPage(1); window.scrollTo(0, 0); } }&#10;                    function previousPage(){ if (currentPage &gt; 1)   { showPage(currentPage - 1); window.scrollTo(0, 0); } }&#10;                    function nextPage()    { if (currentPage &amp;lt; totalPages) { showPage(currentPage + 1); window.scrollTo(0, 0); } }&#10;                    function lastPage()    { if (currentPage !== totalPages) { showPage(totalPages); window.scrollTo(0, 0); } }&#10;&#10;                    // Lance init immédiatement si le DOM est déjà prêt, sinon écoute l'évènement&#10;                    if (document.readyState === 'loading') {&#10;                    document.addEventListener('DOMContentLoaded', init);&#10;                    } else {&#10;                    init();&#10;                    }&#10;                &lt;/script&gt;&#10;            &lt;/body&gt;&#10;        &lt;/html&gt;&#10;    &lt;/xsl:template&gt;&#10;&lt;/xsl:stylesheet&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>